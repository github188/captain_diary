http://blog.csdn.net/ludonqin/article/details/47211109

http://blog.csdn.net/zhangxiaoyang0/article/details/65632828

以上两个博客的综合，得到下面的结论
单机实例安装    不是集群请注意  自己玩可以的
1.  wget http://download.redis.io/redis-stable.tar.gz  ---------wget下载安装包   

2.  tar -zxvf redis-stable.tar.gz    ----------解压    

3.  cd redis-stable       --------------编译，安装

4.  yum -y install  gcc    -- 安装gcc

5.  yum -y install  tcl  --安装tcl

6.  make distclean

7.  make   ------------ 编译Make成功之后，会在/usr/local/bin目录下多出一些文件： 
redis-check-aof redis-check-dump redis-cli redis-sentinel
             -------- redis-server redis-trib.rb 可手动拷贝redis-server、redis-cli、redis-check-aof、
             redis-check-dump等至/usr/local/bin目录下，也可执行make install，此处执行make install
8. make install      ----可查看，/usr/local/bin下已有上面这些文件         

9.  cd /etc/
10.  mkdir redis
11.  cd /var/
12.  mkdir  redis
13.  cd redis
14.  mkdir data log run
15. cd ~/redis-stable/
16. cp redis.conf /etc/redis/
17. cd /etc/redis/
18. vim redis.conf
将daemonize no 改为 daemonize yes    -----使得redis在background运行
保存，退出
19. cd /usr/local/bin 
20. ./redis-server /etc/redis/redis.conf
21. ps -ef | grep redis
22. ./redis-cli -h 127.0.0.1 -p 6379   ----这样就进入了redis

-- 增加密码登录  
cd /usr/local/bin
vim redis.conf
用 斜杠加回车命令 找到  # requirepass foobared
去掉前面的#  foobared改为自己的密码  123456



-------如何设置用户名密码

连接redis是不需要用户名和密码的，只需要ip和port
上面的redis安装还可以简化，不用拷贝启动文件到etc下面，直接启动./redis-server 就可以了   
启动sentinel，直接用./redis-sentinel,前提是执行过了slaveof命令，再去执行启动所有机器上的sentinel

sentinel需要在55和56做好主从之后才能开启，即：在56上执行slaveof，搭建好主从之后，再开启3个sentinel监控服务，一个高可用的（主从自动切换）搭建完成。可以通过在master上执行debug sleep命令来模拟故障转移，来测试sentinel故障转移是否搭建成功：

debug sleep 30

不明白这里第三台是怎么去做哨兵的  第三台也是对master节点做监控

2.2、sentinel.conf配置如下



Master（192.168.50.100）机器配置如下：

[java] view plain copy
port 26379  
#1表示在sentinel集群中只要有两个节点检测到redis主节点出故障就进行切换，单sentinel节点无效(自己测试发现的)  
#如果3s内mymaster无响应，则认为mymaster宕机了  
#如果10秒后,mysater仍没活过来，则启动failover  
sentinel monitor mymaster 192.168.50.100 6379 1  
sentinel down-after-milliseconds mymaster 3000  
sentinel failover-timeout mymaster 10000  
daemonize yes  
#指定工作目录  
dir "/home/redis/sentinel-work"  
protected-mode no  
logfile "/home/redis/sentinellog/sentinel.log"  
#redis主节点密码  
sentinel auth-pass mymaster 123456  
# Generated by CONFIG REWRITE  


https://www.cnblogs.com/zhoujinyi/p/6430116.html



